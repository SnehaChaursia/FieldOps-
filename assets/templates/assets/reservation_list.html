{% extends "base.html" %}

{% block content %}

<style>
    /* Increase table width + row height */
    .reservations-table {
        font-size: 1rem;
        width: 100%;
    }

    .reservations-table th {
        padding: 16px;
        font-size: 1.05rem;
    }

    .reservations-table td {
        padding: 18px 16px;
    }

    /* Smooth box look */
    .reservations-card {
        border-radius: 20px;
        border: 0;
        overflow: hidden;
    }

    /* Status colors */
    .status-booked {
        background: #ff6b6b !important; /* soft red */
        color: white !important;
    }

    .status-checked {
        background: #51cf66 !important; /* fresh green */
        color: white !important;
    }

    .status-returned {
        background: #4dabf7 !important; /* light blue */
        color: white !important;
    }

    /* Button Purple */
    .btn-checkout {
        background: #9370DB !important;  /* soft purple */
        color: white !important;
        font-weight: 600;
        border-radius: 10px;
    }

    .btn-checkout:hover {
        background: #8058d6 !important;
    }
</style>

<div class="container mt-4">

    <h2 class="mb-4 fw-bold text-primary">Reservations</h2>

    <div class="card shadow-sm reservations-card">
        <div class="card-body">

            <table class="table table-hover align-middle reservations-table">
                <thead class="table-light">
                    <tr>
                        <th>Asset</th>
                        <th>User</th>
                        <th>Check-in</th>
                        <th>Check-out</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>

                <tbody>
                    {% for r in reservations %}
                    <tr>
                        <td class="fw-semibold">{{ r.asset.name }}</td>
                        <td>{{ r.user_name }}</td>
                        <td>{{ r.check_in }}</td>
                        <td>{{ r.check_out }}</td>

                        <td>
                            {% if r.status == "booked" %}
                                <span class="badge px-4 py-2 rounded-pill status-booked">Booked</span>
                            {% elif r.status == "checked_out" %}
                                <span class="badge px-4 py-2 rounded-pill status-checked">Checked-out</span>
                            {% elif r.status == "returned" %}
                                <span class="badge px-4 py-2 rounded-pill status-returned">Returned</span>
                            {% else %}
                                <span class="badge bg-secondary px-4 py-2 rounded-pill">{{ r.status }}</span>
                            {% endif %}
                        </td>

                        <td>
                            {% if r.status == "booked" %}
                                <a href="{% url 'checkout_reservation' r.pk %}"
                                   class="btn btn-sm btn-checkout px-3 py-2">
                                    Checkout
                                </a>
                            {% else %}
                                <span class="text-muted">â€”</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

        </div>
    </div>

</div>

{% endblock %}
